===========================================
CÃ“DIGO PARA FRONT_ALUEN - ELIMINAR INVENTARIO
===========================================

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. ACTUALIZAR: src/services/api.js
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Buscar el objeto inventarioAPI y agregar el mÃ©todo delete:

export const inventarioAPI = {
  getAll: (params = {}) => api.get('/inventario', { params }),
  getById: (id) => api.get(`/inventario/${id}`),
  update: (id, data) => api.put(`/inventario/${id}`, data),
  delete: (id) => api.delete(`/inventario/${id}`),  // ğŸ‘ˆ AGREGAR ESTA LÃNEA
  getBajoStock: () => api.get('/inventario/alerta/bajo-stock'),
};

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2. ACTUALIZAR: src/pages/Inventario.js
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

A. En la secciÃ³n de imports, asegurarse que Modal estÃ© incluido:
   
   import { Container, Row, Col, Card, Table, Badge, Alert, Spinner, Button, Form, Modal } from 'react-bootstrap';


B. Agregar estos estados despuÃ©s de los estados existentes (cerca de la lÃ­nea 20):

  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [itemAEliminar, setItemAEliminar] = useState(null);


C. Agregar estas funciones despuÃ©s de handleAjustarStock:

  const handleOpenDeleteModal = (item) => {
    if (item.stockActual > 0) {
      alert('âš ï¸ No se puede eliminar un producto con stock disponible.\n\nPrimero ajusta el stock a 0.');
      return;
    }
    setItemAEliminar(item);
    setShowDeleteModal(true);
  };

  const handleConfirmDelete = async () => {
    if (!itemAEliminar) return;

    try {
      const response = await inventarioAPI.delete(itemAEliminar._id);
      alert(`âœ… ${response.data.mensaje}\n\nProducto: ${response.data.nombreVela}\nCÃ³digo: ${response.data.codigo}`);
      setShowDeleteModal(false);
      setItemAEliminar(null);
      fetchInventario(); // Recargar el inventario
    } catch (err) {
      console.error('Error al eliminar:', err);
      alert('âŒ Error: ' + (err.response?.data?.error || err.message));
    }
  };

  const handleCloseDeleteModal = () => {
    setShowDeleteModal(false);
    setItemAEliminar(null);
  };


D. En la tabla, en la columna "Stock Actual", DESPUÃ‰S del botÃ³n de ajustar (âœï¸), agregar:

                            {usuario?.rol === 'admin' && item.stockActual === 0 && (
                              <Button
                                size="sm"
                                variant="outline-danger"
                                onClick={() => handleOpenDeleteModal(item)}
                                title="Eliminar del inventario"
                                style={{ fontSize: '0.8rem', padding: '0.25rem 0.5rem' }}
                              >
                                ğŸ—‘ï¸
                              </Button>
                            )}


E. Al final del componente, ANTES del cierre de </Container>, DESPUÃ‰S del Modal de ajuste, agregar:

      {/* Modal de ConfirmaciÃ³n de EliminaciÃ³n */}
      <Modal show={showDeleteModal} onHide={handleCloseDeleteModal} centered>
        <Modal.Header closeButton>
          <Modal.Title>âš ï¸ Confirmar EliminaciÃ³n</Modal.Title>
        </Modal.Header>
        <Modal.Body>
          {itemAEliminar && (
            <>
              <Alert variant="warning">
                <strong>Â¿EstÃ¡s seguro que deseas eliminar este producto del inventario?</strong>
              </Alert>
              <div className="mb-3">
                <p><strong>CÃ³digo:</strong> {itemAEliminar.receta?.codigo || 'N/A'}</p>
                <p><strong>Nombre:</strong> {itemAEliminar.nombreVela}</p>
                <p><strong>Stock actual:</strong> {itemAEliminar.stockActual} unidades</p>
              </div>
              <Alert variant="info">
                <small>
                  â„¹ï¸ Esta acciÃ³n eliminarÃ¡ el registro del inventario. Si produces esta vela nuevamente, 
                  se crearÃ¡ un nuevo registro.
                </small>
              </Alert>
            </>
          )}
        </Modal.Body>
        <Modal.Footer>
          <Button variant="secondary" onClick={handleCloseDeleteModal}>
            Cancelar
          </Button>
          <Button variant="danger" onClick={handleConfirmDelete}>
            ğŸ—‘ï¸ SÃ­, Eliminar
          </Button>
        </Modal.Footer>
      </Modal>

===========================================
BACKEND YA ACTUALIZADO âœ…
===========================================

El endpoint DELETE /api/inventario/:id ya estÃ¡ implementado con:

âœ… ValidaciÃ³n de stock = 0
âœ… EliminaciÃ³n del registro
âœ… Logs en consola
âœ… Respuesta con confirmaciÃ³n

===========================================
INSTRUCCIONES DE IMPLEMENTACIÃ“N
===========================================

1. Aplicar los cambios en el cÃ³digo del frontend
2. Hacer commit y push a GitHub
3. Netlify desplegarÃ¡ automÃ¡ticamente
4. Render ya tiene el backend actualizado

===========================================
FUNCIONALIDAD FINAL
===========================================

âœ… Solo admin puede ver el botÃ³n de eliminar
âœ… BotÃ³n ğŸ—‘ï¸ solo aparece cuando stock = 0
âœ… Modal de confirmaciÃ³n antes de eliminar
âœ… ValidaciÃ³n backend para seguridad
âœ… Mensaje de confirmaciÃ³n al usuario
âœ… Recarga automÃ¡tica del inventario


